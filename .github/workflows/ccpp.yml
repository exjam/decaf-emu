name: C/C++ CI

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: conan
      run: |
        pip install --user conan
        conan user
        conan remote add bincrafters https://api.bintray.com/conan/bincrafters/public-conan || true
        conan install .. --build=missing -s compiler=clang -s compiler.version=6.0 -o silent=True -o curl=False -o openssl=False -o ffmpeg=False
      env:
        CC: clang-6.0
        CXX: clang++-6.0
    - name: cmake
      run: |
        mkdir build
        cd build
        cmake -DDECAF_BUILD_TOOLS=ON -DDECAF_FFMPEG=OFF -DCMAKE_BUILD_TYPE=Release ..
    - name: make
      run: make
